---
interface Props {
  title: string;
  date: Date;
  venue: string;
  city: string;
  ticketUrl?: string;
  isSoldOut?: boolean;
  isPast?: boolean;
}

const { title, date, venue, city, ticketUrl, isSoldOut = false, isPast = false } = Astro.props;

// Format date
const formattedDate = date.toLocaleDateString("es-ES", {
  day: "numeric",
  month: "short",
  year: "numeric",
});

const dayNumber = date.getDate();
const monthName = date.toLocaleDateString("es-ES", { month: "short" }).toUpperCase();
---

<article class={`bg-band-dark border rounded-lg overflow-hidden transition-all group ${isPast ? 'border-gray-700 opacity-60' : 'border-band-gold/20 hover:border-band-gold/50'}`}>
  <div class="flex flex-col sm:flex-row">
    <!-- Date block -->
    <div class={`flex-shrink-0 p-6 flex flex-col items-center justify-center sm:w-28 ${isPast ? 'bg-gray-800' : 'bg-band-dark-100'}`}>
      <span class={`text-3xl font-bold ${isPast ? 'text-gray-500' : 'text-band-gold'}`}>
        {dayNumber}
      </span>
      <span class={`text-sm uppercase tracking-wider ${isPast ? 'text-gray-600' : 'text-gray-400'}`}>
        {monthName}
      </span>
      <span class={`text-xs ${isPast ? 'text-gray-600' : 'text-gray-500'}`}>
        {date.getFullYear()}
      </span>
    </div>

    <!-- Content -->
    <div class="flex-1 p-6">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div>
          <h3 class={`text-lg font-semibold mb-1 ${isPast ? 'text-gray-400' : 'text-white group-hover:text-band-gold'} transition-colors`}>
            {venue}
          </h3>
          <p class={`${isPast ? 'text-gray-600' : 'text-gray-400'}`}>
            {city}
          </p>
        </div>

        <!-- Action -->
        <div class="flex-shrink-0">
          {isPast ? (
            <span class="inline-block px-4 py-2 text-sm text-gray-500 uppercase tracking-wider">
              Pasado
            </span>
          ) : isSoldOut ? (
            <span class="inline-block px-4 py-2 bg-band-red/20 text-band-red text-sm font-semibold uppercase tracking-wider rounded">
              Agotado
            </span>
          ) : ticketUrl ? (
            <a
              href={ticketUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="btn-primary inline-flex items-center gap-2 text-sm"
            >
              Entradas
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
              </svg>
            </a>
          ) : (
            <span class="inline-block px-4 py-2 text-sm text-gray-500 uppercase tracking-wider">
              Pr√≥ximamente
            </span>
          )}
        </div>
      </div>
    </div>
  </div>
</article>
