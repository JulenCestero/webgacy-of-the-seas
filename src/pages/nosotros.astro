---
import { db, members } from "../lib/db";
import { asc } from "drizzle-orm";
import BaseLayout from "../layouts/BaseLayout.astro";
import MemberCard from "../components/MemberCard.astro";
import MemberModal from "../components/MemberModal.astro";

// Get all members sorted by order
const sortedMembers = await db.select().from(members).orderBy(asc(members.order));

const influences = [
  "Mago de Oz",
  "Rhapsody of Fire",
  "Nightwish",
  "Blind Guardian",
  "Sabaton",
  "Epica"
];
---

<BaseLayout title="Nosotros" description="Conoce a la tripulación de Legacy of the Seas. Historia, miembros e influencias de la banda de metal más épica del panorama.">
  <!-- Hero section -->
  <section class="py-20 bg-band-dark-50">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-6xl font-metal text-gradient mb-6">
        La Tripulación
      </h1>
      <p class="text-xl text-gray-300 max-w-2xl mx-auto">
        Cinco almas unidas por el metal y las leyendas del mar.
      </p>
    </div>
  </section>

  <!-- Band history -->
  <section class="py-16 bg-band-dark">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-3xl font-metal text-band-sea mb-8 text-center">
          Nuestra Historia
        </h2>

        <div class="prose prose-invert prose-lg max-w-none">
          <p class="text-gray-300 leading-relaxed mb-6">
            Legacy of the Seas es una banda de Metal Sinfónico con influencias Folk y Power
            creada en 2010, tomando como referentes a bandas como Mago de Oz, Rhapsody of Fire
            o Nightwish.
          </p>

          <p class="text-gray-300 leading-relaxed mb-6">
            La senda de la banda se vio marcada por la pérdida de dos de sus jóvenes miembros,
            ralentizando la salida a los escenarios. Sin embargo, estas pérdidas dieron forma
            al espíritu de la banda, alimentando el deseo de hacer llegar su Legado a lo largo
            y ancho de los siete mares.
          </p>

          <p class="text-gray-300 leading-relaxed">
            No es hasta 2023 que la banda completa su tripulación y publica su primer EP:
            Eternidad. En 2024 lanza su primer álbum de estudio: "Leyendas de una Eternidad",
            que está siendo presentado mediante una serie de conciertos por Euskadi y alrededores.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Members grid -->
  <section class="py-16 bg-band-dark-50">
    <div class="container mx-auto px-4">
      <h2 class="text-2xl md:text-3xl font-metal text-band-sea mb-10 text-center">
        Los Miembros
      </h2>

      <div class="flex flex-wrap justify-center gap-6 max-w-6xl mx-auto">
        {sortedMembers.map((member) => (
          <MemberCard
            name={member.name}
            role={member.role}
            image={member.image}
            bio={member.bio}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Influences -->
  <section class="py-16 bg-band-dark">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-2xl md:text-3xl font-metal text-band-sea mb-8">
          Influencias
        </h2>

        <p class="text-gray-400 mb-8">
          Nuestro sonido bebe de las fuentes más épicas del metal:
        </p>

        <div class="flex flex-wrap justify-center gap-4">
          {influences.map((band) => (
            <span class="px-4 py-2 bg-band-dark-100 border border-band-sea/20 rounded-full text-gray-300 text-sm hover:border-band-sea/50 hover:text-band-sea transition-all">
              {band}
            </span>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-16 bg-band-dark-50">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-xl md:text-2xl font-metal text-band-sea mb-6">
        ¿Quieres conocernos en persona?
      </h2>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/conciertos" class="btn-primary">
          Ver Conciertos
        </a>
        <a href="/contacto" class="btn-secondary">
          Contactar
        </a>
      </div>
    </div>
  </section>

  <MemberModal />
</BaseLayout>
